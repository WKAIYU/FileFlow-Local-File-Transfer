# FileFlow / 文件快传

一个简单易用的本地文件传输工具，允许在局域网内的设备之间快速共享文件，无需互联网连接。

<div align="center">

[![Node.js Version](https://img.shields.io/badge/node-%3E%3D12.0-brightgreen)](https://nodejs.org)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

*无需互联网，安全私密的局域网文件共享解决方案*

</div>

### 可视化上传体验
- **实时文件预览**: 在虚线框内显示准备上传的文件列表，包括文件名和文件大小
- **拖拽可视化**: 拖拽文件时有明确的视觉反馈
- **上传状态**: 点击"开始上传"后，预览文件自动消失，提供清晰的进度反馈
- **智能冲突处理**: 检测文件名冲突并提供重命名、跳过、替换选项

### 中文文件名支持
- 彻底修复中文文件名乱码问题
- 自动处理特殊字符和非法文件名
- 支持所有语言的文件名显示

## 功能特点

- 🚀 **快速传输** - 在局域网内高速传输文件
- 📱 **多设备支持** - 任何连接到同一网络的设备都可以访问
- 🖥️ **跨平台** - 支持Windows、macOS、Linux、iOS和Android
- 🔄 **实时同步** - 所有设备实时看到相同的文件列表
- 📂 **文件管理** - 支持上传、下载和删除文件
- 🛡️ **安全私密** - 文件仅在本地网络传输，不上传到云端
- 🎨 **美观界面** - 现代化响应式设计，适配各种屏幕尺寸
- 👀 **可视化上传** - 实时预览待上传文件，清晰的操作反馈
- 🔧 **智能处理** - 自动处理中文文件名乱码和重复文件名

## 系统要求

- Node.js 12.0 或更高版本
- 现代浏览器（Chrome、Firefox、Safari、Edge等）

## 安装步骤

### 1. 下载项目文件

将项目文件下载到本地计算机的任意文件夹中。

### 2. 安装依赖

打开命令行，进入项目目录，运行以下命令：

```bash
npm install
```

如果遇到网络问题，可以使用国内镜像：

```bash
npm install --registry=https://registry.npmmirror.com
```

### 3. 启动服务器

```bash
node server.js
```

成功启动后，您将看到类似以下输出：
```
=================================
🚀 文件传输服务器已启动!
📍 本地访问: http://localhost:3000
🌐 局域网访问: http://你的IP地址:3000
=================================
💡 提示: 其他设备需要连接到同一WiFi网络
```

## 使用方法

### 在电脑上访问

1. 打开浏览器
2. 输入 `http://localhost:3000`
3. 开始上传和下载文件

### 在其他设备上访问

1. 确保设备连接到同一WiFi网络
2. 打开浏览器
3. 输入显示的IP地址（如 `http://192.168.1.100:3000`）,如果没有显示则查找电脑IP地址

### 查找电脑IP地址

#### Windows
1. 按 `Win + R`，输入 `cmd` 并按回车
2. 输入 `ipconfig` 并按回车
3. 查找"IPv4 地址"

#### macOS
1. 打开"系统偏好设置" > "网络"
2. 选择当前连接的网络
3. 查看显示的IP地址

#### Linux
1. 打开终端
2. 输入 `ip addr show` 或 `ifconfig`
3. 查找inet地址

## 使用说明

### 上传文件

1. **选择文件**：
   - 点击上传区域或拖放文件到上传区域
   - 选择的文件会立即显示在虚线框内
   - 可以查看文件名和文件大小

2. **处理文件名冲突**（如有）：
   - **重命名**：修改文件名后上传
   - **跳过**：不上传这个文件
   - **替换**：替换服务器上的同名文件

3. **开始上传**：
   - 点击"开始上传"按钮
   - 上传过程中显示进度条
   - 上传完成后，预览文件消失，文件出现在已上传列表

### 下载文件

1. 在文件列表中找到要下载的文件
2. 点击"下载"按钮
3. 文件将保存到设备的默认下载位置

### 删除文件

1. 在文件列表中找到要删除的文件
2. 点击红色的"×"按钮
3. 确认删除操作

## 文件管理

- 所有上传的文件存储在 `uploads` 文件夹中
- 文件信息存储在内存中，重启服务器会清空文件列表
- 物理文件不会自动删除，需要手动清理

## 界面说明

### 上传区域
- **虚线框**: 点击或拖放文件到此处
- **文件预览**: 选择的文件会显示在虚线框内，包含文件名和大小
- **上传按钮**: 点击后开始上传，上传完成后预览消失

### 文件列表
- **已上传文件**: 显示所有成功上传的文件
- **文件信息**: 显示文件名、大小和上传时间
- **操作按钮**: 下载和删除文件

### 服务器信息
- **访问地址**: 显示本地和局域网访问地址
- **运行状态**: 显示服务器连接状态
- **运行时间**: 显示服务器已运行的时间

## 故障排除

### 无法启动服务器

**问题**: 端口被占用
**解决**: 修改server.js中的端口号，然后重新启动

**问题**: 依赖安装失败
**解决**: 使用国内镜像源安装依赖

### 其他设备无法访问

**问题**: 防火墙阻止连接
**解决**: 允许Node.js通过防火墙，或暂时关闭防火墙

**问题**: 设备不在同一网络
**解决**: 确保所有设备连接到同一WiFi网络

**问题**: IP地址错误
**解决**: 使用正确的IP地址，注意区分IPv4和IPv6

### 文件上传失败

**问题**: 文件大小超过限制
**解决**: 文件不能超过100MB

**问题**: 文件名包含特殊字符
**解决**: 系统会自动清理特殊字符

### 中文文件名乱码

**问题**: 中文文件名显示乱码
**解决**: 已内置处理机制，自动修复中文文件名乱码问题

### 文件无法下载

**问题**: 文件名包含特殊字符
**解决**: 系统会自动处理特殊字符，确保下载正常

## 高级配置

### 修改端口号

编辑 `server.js` 文件，修改端口号：

```javascript
const port = 3000; // 改为您想要的端口号
```

### 修改文件大小限制

编辑 `server.js` 文件，修改大小限制：

```javascript
limits: {
  fileSize: 100 * 1024 * 1024 // 修改为您想要的大小
}
```

### 启用HTTPS

如需启用HTTPS，需要添加SSL证书并修改服务器配置。

## 技术细节

- **后端**: Node.js + Express + Multer
- **前端**: 原生HTML、CSS、JavaScript
- **文件存储**: 本地文件系统
- **网络**: HTTP协议，支持局域网传输
- **编码处理**: 自动处理UTF-8编码和中文文件名

## 更新日志

### v1.3.0 (最新)
- 🆕 新增可视化上传文件预览功能
- 🆕 在虚线框内显示准备上传的文件列表
- 🆕 拖拽区域视觉反馈改进
- 🆕 上传完成后自动清空预览区域
- 🎨 界面优化和用户体验改进

### v1.2.0
- 彻底修复中文文件名乱码问题
- 添加重复文件名智能处理功能
- 改进文件冲突处理界面
- 优化用户体验

### v1.1.0
- 基础文件上传下载功能
- 多设备支持
- 响应式界面设计

## 许可证

本项目采用MIT许可证，您可以自由使用、修改和分发。

## 支持与反馈

如果您遇到问题或有改进建议：

1. 检查本文档的"故障排除"部分
2. 确保使用最新版本
3. 提供详细的错误描述和系统环境信息
4. 查看浏览器控制台是否有错误信息

---

**享受便捷的本地文件传输体验！** 🚀